(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function s(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(a){if(a.ep)return;a.ep=!0;const l=s(a);fetch(a.href,l)}})();const he={easy:5,medium:10,hard:15},B={firstPart:"Great! You have solved the nonogram in ",lastPart:" seconds!",scoreTable:"List of winners"},g={displayNone:"display-none",crossed:"crossedCell",filled:"filledCell",theme:"data-theme"},n={timer:"timer",isTimer:"isTimer",size:"size",levelMatrix:"matrix",levelName:"name",levelMatrixSum:"levelMatrixSum",userMatrix:"userMatrix",correctCount:"correctCount",clues:"clues",isEndGame:"isEndGame",isSound:"isSound",isLightTheme:"isLightTheme",save:"savedGame",index:"index",element:"element",score:"scoreTable",isMuted:"isMuted"},i={gameCells:"gameCells",gameClues:"gameClues",timerMinutes:"timerMinutes",timerSeconds:"timerSeconds",levelInput5:"levelInput5",levelInput10:"levelInput10",levelInput15:"levelInput15",scoreTable:"scoreTable",score:"score",continueButton:"continue",save:"save",reset:"reset",solution:"solution",volume:"volume",changeTheme:"changeTheme"},E={clear:"clear",filled:"filled.",crossed:"crossed",victory:"victory"},oe="radomskaia--nonograms--",v={volumeOn:"./icons/volume-loud.svg",volumeOff:"./icons/volume-cross.svg",lightTheme:"./icons/cloud-sun.svg",darkTheme:"./icons/cloudy-moon.svg",score:"./icons/cup-star.svg",solution:"./icons/eye.svg",save:"./icons/save.svg",continue:"./icons/load.svg",reset:"./icons/reset.svg",random:"./icons/perspective-dice-random.svg"};function c({tagName:e="div",classList:t=[],textContent:s="",attributes:o={}}={}){const a=document.createElement(e);return t.length>0&&a.classList.add(...t),s&&(a.textContent=s),o&&Object.entries(o).forEach(([l,r])=>a.setAttribute(l,r)),a}function pe(e,t){const s=c({tagName:"button",classList:["button","actionButton"],textContent:e});return s.addEventListener("click",t),s}function K(e,t){const s=oe+e;window.localStorage.setItem(s,JSON.stringify(t))}function O(e){const t=oe+e;return JSON.parse(window.localStorage.getItem(t))}function ee(e){return!O(e)}const D={[i.gameCells]:null,[i.gameClues]:null,[i.timerMinutes]:null,[i.timerSeconds]:null,[i.levelInput5]:null,[i.levelInput10]:null,[i.levelInput15]:null,[i.scoreTable]:null,[i.volume]:null,[i.changeTheme]:null};function x(e){if(e in D)return D[e];throw new Error(`Property "${e}" does not exist in elementsDOM.`)}function S(e,t){if(e in D)D[e]=t;else throw new Error(`Cannot set non-existent property "${e}" in elementsDOM.`)}const p={[n.timer]:0,[n.isTimer]:!1,[n.size]:5,[n.levelMatrix]:null,[n.levelName]:null,[n.levelMatrixSum]:0,[n.userMatrix]:null,[n.correctCount]:0,[n.clues]:null,[n.isEndGame]:!1,[n.isSound]:!0,[n.isLightTheme]:!1,[n.score]:[]};function u(e){if(e===n.save)return{[n.timer]:p[n.timer],[n.size]:p[n.size],[n.levelMatrix]:p[n.levelMatrix],[n.levelName]:p[n.levelName],[n.levelMatrixSum]:p[n.levelMatrixSum],[n.userMatrix]:p[n.userMatrix],[n.correctCount]:p[n.correctCount],[n.clues]:p[n.clues]};if(e in p)return p[e];throw new Error(`Property "${e}" does not exist in gameState.`)}function d(e,t){if(e in p)p[e]=t;else throw new Error(`Cannot set non-existent property "${e}" in gameState.`)}const b=1e3,te=60*b;let ae;const ne={};let z;function ve(){const e=c({classList:["flex","flex--align-justify-center","flex_gap-10","margin-0-auto","width80px"]}),t=c({tagName:"p",textContent:"00"}),s=c({tagName:"p",textContent:":",classList:["flex","flex--align-justify-center","flex_gap-10"]}),o=c({tagName:"p",textContent:"00"});return e.append(t,s,o),S(i.timerMinutes,t),S(i.timerSeconds,o),e}function P(e,t){return Math.floor(e/t)}function I(e,t){if(t===ne[e])return;const s=x(e==="seconds"?i.timerSeconds:i.timerMinutes);s.textContent=`${t}`.padStart(2,"0"),ne[e]=t}function F(e,t=!1){let s=t?e*b:Date.now()-e,o={};o.minutes=P(s,te),s%=te,o.seconds=P(s,b),I("minutes",o.minutes),I("seconds",o.seconds)}function xe(){const e=u(n.timer)*b;z=Date.now()-e,F(z),ae=setInterval(F,b,z)}function $(){clearInterval(ae)}function le(){const e=Date.now()-z,t=P(e,b);d(n.timer,t)}function Le(){I("minutes",0),I("seconds",0),d(n.timer,0)}let G;function Ee(){const e=["№","Name","Size","Time"],t=c({tagName:"table",classList:["scoreTable"]}),s=c({tagName:"thead"});return s.append(ie(e,"th")),G=c({tagName:"tbody"}),t.append(s,G),t}function ie(e,t){const s=c({tagName:"tr"});return e.forEach(o=>{const a=c({tagName:t,textContent:o,classList:["data"]});s.append(a)}),s}function Me(){G.replaceChildren();const e=[...u(n.score)];e.sort((t,s)=>t[n.timer]-s[n.timer]),e.forEach((t,s)=>{const o=[s+1,...t.data];G.append(ie(o,"td"))})}function Ce(e){const t=u(n.score);t.length<5||t.shift(),t.push(e)}function Se(){K(n.score,u(n.score))}let T,R,H;function re(e,t){R.textContent=e,H.classList.toggle(g.displayNone,t),T.showModal()}function be(){T=c({tagName:"dialog",classList:["modal"]});const e=c({classList:["flex","flex--column","flex--align-center","flex_gap-20"]}),t=pe("close",()=>T.close());return R=c({tagName:"p"}),H=Ee(),e.append(R,H,t),T.append(e),T}const Te={[E.clear]:"clear.mp3",[E.filled]:"filled.mp3",[E.crossed]:"crossed.mp3",[E.victory]:"victory.mp3"},ye="./sounds/",_={};let W=!1;function Ne(){Object.entries(Te).forEach(([e,t])=>{_[e]=we(ye+t)})}function we(e){const t=new Audio(e);return t.load(),t}function ce(){let e;Object.values(_).forEach(t=>{t.muted=!t.muted,e=t.muted}),x([i.volume]).src=e?v.volumeOff:v.volumeOn,K(n.isMuted,e)}function A(e){Object.entries(_).forEach(([t,s])=>{Oe(s),t===e&&(W=!0,s.play().catch(o=>console.error("Ошибка воспроизведения аудио:",o)),s.onended=()=>{W=!1})})}function ze(){_.victory.play()}function Oe(e){W&&(e.pause(),e.currentTime=0)}const De={0:{toggle:g.filled,remove:g.crossed,handler:Ge},2:{toggle:g.crossed,remove:g.filled,handler:Ae}};let y,L,M;function Ie(){const e=c({tagName:"table",classList:["gameTable"]});return y=c({tagName:"tbody"}),y.addEventListener("contextmenu",t=>t.preventDefault()),e.append(y),q(),e}function q(){y.replaceChildren();const e=u("size");M={row:[],column:[]},L=[];for(let t=0;t<=e;t++){t!==0&&L.push([]);const s=c({tagName:"tr",classList:["gameRow"]});for(let o=0;o<=e;o++){let a;t===0&&o===0?(a=N(null,!0),a.append(ve()),a.classList.add("timerCell")):o===0?a=N(M.row,!0):t===0?(a=N(M.column,!0),a.addEventListener("mouseenter",function(){L.forEach(l=>l[o-1].classList.add("highlightCell")),a.classList.add("highlightCell")}),a.addEventListener("mouseleave",function(){L.forEach(l=>l[o-1].classList.remove("highlightCell")),a.classList.remove("highlightCell")})):a=N(L[t-1],!1,t-1,o-1),s.append(a)}S(i.gameCells,L),S(i.gameClues,M),y.append(s)}}function ue(){const e=x(i.gameClues),t=u(n.clues);Object.entries(t).forEach(([s,o])=>{const a=s==="row"?" ":`

`;o.forEach((l,r)=>{e[s][r].textContent=l.join(a)})})}function N(e,t,s=0,o=0){const a={classList:["cell"]};t?(a.tagName="th",a.classList.push("tableHeader")):a.tagName="td";const l=c(a);if(e==null||e.push(l),!t){l.addEventListener("contextmenu",m=>{m.preventDefault(),w(m,l,s,o)}),l.addEventListener("click",m=>w(m,l,s,o)),l.addEventListener("mouseenter",function(){L.forEach(m=>m[o].classList.add("highlightCell")),M.column[o].classList.add("highlightCell")}),l.addEventListener("mouseleave",function(){L.forEach(m=>m[o].classList.remove("highlightCell")),M.column[o].classList.remove("highlightCell")});let r,f;l.addEventListener("touchstart",m=>{m.target===l&&(m.preventDefault(),r=Date.now(),f=setTimeout(()=>{w(2,l,s,o)},300))}),l.addEventListener("touchend",()=>{Date.now()-r<=300&&(clearTimeout(f),w(0,l,s,o))}),l.addEventListener("touchcancel",()=>{clearTimeout(f)})}return l}function w(e,t,s,o){if(u(n.isEndGame))return;u(n.isTimer)||(xe(),d(n.isTimer,!0),h(!1,[i.save]),h(!1,[i.reset]));const a=De[e.button??e];if(!a)return;const l=u(n.levelMatrix),r=u(n.userMatrix);t.classList.toggle(a.toggle),t.classList.remove(a.remove),a.handler(l[s][o],r,s,o)}function Ge(e,t,s,o){t[s][o]===1?(t[s][o]=0,A(E.clear)):(t[s][o]=1,A(E.filled)),me(e,t[s][o])}function Ae(e,t,s,o){const a=t[s][o];t[s][o]===2?(t[s][o]=0,A(E.clear)):(t[s][o]=2,A(E.crossed)),a===1&&me(e,t[s][o])}function me(e,t){let s=u(n.correctCount);t=t===2?0:t,s+=e===t?1:-1,d(n.correctCount,s),$e(s)}function $e(e){e===u(n.levelMatrixSum)&&_e()}function _e(){ze(),$(),le(),d(n.isEndGame,!0);const e=u(n.levelName),t=u([n.size]),s=u([n.timer]),o={[n.timer]:s,data:[`${e[0].toUpperCase()}${e.slice(1)}`,`${t}x${t}`,`${x(i.timerMinutes).textContent}
      : ${x(i.timerSeconds).textContent}`]};h(!1,[i.score]),h(!0,[i.save]),h(!0,[i.solution]),Ce(o),Se();const a=B.firstPart+s+B.lastPart;re(a,!0),d(n.isTimer,!1)}function ke(){const e=u(n.size),t=Array.from({length:e},()=>Array(e).fill(0));d(n.userMatrix,t)}function Be(){const t=u(n.levelMatrix).reduce((s,o)=>s+o.reduce((a,l)=>a+l,0),0);d(n.levelMatrixSum,t)}function Pe(){const e=u(n.levelMatrix),t=e.length,s={column:Array.from({length:t},()=>[]),row:Array.from({length:t},()=>[])};let o=new Array(t).fill(0);e.forEach((a,l)=>{let r=0;a.forEach((f,m)=>{f===0&&o[m]===0&&r===0||(f===0&&o[m]!==0&&(s.column[m].push(o[m]),o[m]=0),f===0&&r!==0&&(s.row[l].push(r),r=0),f!==0&&(r++,o[m]+=1,m===t-1&&r!==0&&s.row[l].push(r)))}),l===t-1&&o.forEach((f,m)=>{f!==0&&s.column[m].push(f)})}),d(n.clues,s)}function de(){Pe(),ke(),Be()}const k=[{size:5,name:"bat",matrix:[[0,1,0,1,0],[1,1,1,1,1],[1,1,1,1,1],[1,0,1,0,1],[1,0,0,0,1]]},{size:5,name:"scull",matrix:[[0,1,1,1,0],[1,1,1,1,1],[1,0,1,0,1],[1,1,1,1,1],[0,1,0,1,0]]},{size:5,name:"snowflake",matrix:[[1,0,1,0,1],[0,1,1,1,0],[1,1,0,1,1],[0,1,1,1,0],[1,0,1,0,1]]},{size:5,name:"psi",matrix:[[1,0,1,0,1],[1,0,1,0,1],[1,0,1,0,1],[0,1,1,1,0],[0,0,1,0,0]]},{size:5,name:"towel",matrix:[[1,0,1,0,1],[1,1,1,1,1],[0,1,1,1,0],[0,1,0,1,0],[0,1,1,1,0]]},{size:5,name:"flag",matrix:[[1,1,1,1,1],[1,0,1,0,1],[1,1,1,1,1],[1,0,0,0,0],[1,0,0,0,0]]},{size:5,name:"dog",matrix:[[0,0,0,1,0],[1,0,1,1,1],[0,1,1,1,0],[0,1,0,1,0],[0,1,0,1,0]]},{size:5,name:"airplane",matrix:[[0,0,1,0,0],[0,1,1,1,0],[1,1,1,1,1],[0,0,1,0,0],[0,1,1,1,0]]},{size:10,name:"question mark",matrix:[[0,0,1,1,1,1,1,1,0,0],[0,1,1,0,0,0,0,1,1,0],[0,1,1,0,0,0,0,1,1,0],[0,0,0,0,0,0,0,1,1,0],[0,0,0,0,0,0,1,1,1,0],[0,0,0,0,1,1,1,1,0,0],[0,0,0,0,1,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,0,0,0],[0,0,0,0,1,1,0,0,0,0]]},{size:10,name:"mouse",matrix:[[0,0,1,1,0,0,0,1,1,0],[0,1,0,0,1,0,1,0,0,1],[0,1,0,1,1,1,1,1,0,1],[0,0,1,0,0,1,0,0,1,0],[0,0,0,1,1,1,1,1,0,0],[0,0,1,1,1,0,1,1,1,0],[1,0,1,1,1,1,1,1,1,1],[1,0,1,1,1,1,1,1,1,1],[1,0,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,0]]},{size:10,name:"house",matrix:[[0,0,0,0,1,1,0,0,0,0],[0,0,0,1,1,1,1,0,0,0],[0,0,1,1,1,1,1,1,0,0],[0,1,1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,0,1,1,1,1],[1,1,1,1,0,0,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1]]},{size:10,name:"snail",matrix:[[0,0,1,1,1,1,0,0,0,0],[0,1,1,0,1,1,1,0,0,0],[1,1,1,1,0,1,1,1,0,0],[1,0,1,1,1,0,1,1,0,0],[1,1,1,1,1,0,1,1,0,0],[1,1,1,1,0,1,1,0,0,0],[1,1,1,1,1,1,1,0,1,0],[1,1,1,1,1,1,0,0,0,1],[0,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,0]]},{size:10,name:"music",matrix:[[0,0,0,0,0,0,1,1,1,1],[0,0,0,1,1,1,0,0,0,1],[0,0,0,1,0,0,0,1,1,1],[0,0,0,1,1,1,1,0,0,1],[0,0,0,1,0,0,0,0,0,1],[0,0,0,1,0,0,0,1,1,1],[0,1,1,1,0,0,1,1,1,1],[1,1,1,1,0,0,1,1,1,1],[1,1,1,1,0,0,0,1,1,0],[0,1,1,0,0,0,0,0,0,0]]},{size:15,name:"castle",matrix:[[0,0,0,0,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],[1,1,0,1,1,0,1,0,0,0,1,1,0,1,1],[1,1,1,1,1,0,1,0,0,0,1,1,1,1,1],[1,0,0,0,1,0,1,0,0,0,1,0,0,0,1],[1,0,1,0,1,0,1,0,0,0,1,0,1,0,1],[1,0,1,0,1,1,1,1,1,1,1,0,1,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,1,0,0,0,0,0,0,0,1,0,0,1],[1,0,1,1,1,0,0,1,0,0,1,1,1,0,1],[1,0,0,1,0,0,1,1,1,0,0,1,0,0,1],[1,0,0,1,0,0,1,1,1,0,0,1,0,0,1],[1,0,0,0,0,0,1,1,1,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]]},{size:15,name:"music 2",matrix:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,1,1],[1,1,1,0,1,0,1,1,1,1,1,1,1,1,1],[0,0,1,0,1,0,1,0,0,0,0,0,0,0,0],[1,1,1,0,1,0,1,1,1,1,1,1,1,0,1],[0,1,1,0,0,1,1,0,0,0,0,0,0,0,0],[1,1,0,0,1,1,1,1,1,1,0,1,1,0,1],[1,0,1,0,0,1,1,0,0,0,0,0,0,0,0],[1,0,0,0,1,0,1,1,1,1,0,1,0,1,1],[1,0,1,0,1,0,1,0,0,0,0,0,0,0,0],[1,1,0,0,0,1,1,1,1,0,1,1,1,1,1],[1,1,1,0,1,1,0,0,0,0,0,0,0,0,0],[1,0,1,0,1,1,1,1,1,1,1,1,1,1,1],[1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]]},{size:15,name:"deer",matrix:[[1,1,0,1,1,0,0,0,0,0,0,1,1,0,1],[1,1,0,1,1,0,1,0,0,1,0,1,1,0,1],[0,1,1,1,1,0,1,0,0,1,0,1,1,0,1],[0,0,1,1,1,1,1,0,0,0,1,1,1,1,1],[0,0,0,0,1,1,0,1,1,1,1,1,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,1,1,0,0],[0,0,0,0,0,1,0,1,0,1,1,1,1,1,0],[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,0,1,1,1,1,1],[0,1,0,1,1,1,0,0,0,0,1,1,1,1,1],[0,1,1,1,1,1,0,0,0,0,1,1,1,1,1],[0,0,1,1,1,0,0,0,0,1,1,1,1,1,1],[0,0,0,0,0,0,0,0,0,1,1,1,1,1,1]]},{size:15,name:"lion",matrix:[[0,0,0,1,1,1,1,1,1,1,1,1,0,0,0],[0,0,1,1,1,1,0,0,0,1,1,1,1,0,0],[0,0,1,0,1,0,0,0,0,0,1,0,1,0,0],[0,1,1,0,0,0,0,0,0,0,0,0,1,1,0],[0,1,1,0,0,1,0,0,0,1,0,0,1,1,0],[1,1,1,1,0,0,1,0,1,0,0,1,1,1,1],[1,1,1,1,0,0,1,0,1,0,0,1,1,1,1],[1,1,1,1,0,0,1,1,1,0,1,1,1,1,1],[1,1,1,1,1,0,0,1,0,0,1,1,1,1,1],[1,1,1,1,1,1,0,0,0,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,1,1,1,1,1,1,1,1,1,0,0,0]]},{size:15,name:"frog",matrix:[[0,1,0,1,0,1,0,0,0,1,0,1,0,1,0],[0,0,1,1,1,0,0,0,0,0,1,1,1,0,0],[0,1,1,0,1,1,0,0,0,1,1,0,1,1,0],[0,1,0,1,0,1,0,0,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,0,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,0,0,1,0,1,0,1,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,0,1,1,1,1,1,1,1,1,1,1,1,0,1],[1,1,0,1,1,1,1,1,1,1,1,1,0,1,1],[1,1,1,0,0,0,0,0,0,0,0,0,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,1,1,0,0,1,1,0,0,0,0],[0,0,0,0,0,0,1,1,1,1,0,0,0,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,0]]}],C=new Map,fe={};function Fe(e){const t=c({tagName:"div",classList:["levelWrapper"]}),s=c({tagName:"ul",classList:["flex","flex--justify-center","flex_gap-20","levelList"]});e.forEach(a=>s.append(Re(a)));const o=He();return t.append(s,o),t}function Re(e){const t=c({tagName:"li"}),s=c({tagName:"input",classList:[g.displayNone],attributes:{type:"radio",name:"level",id:e}});fe[e]=s,e===u(n.size)&&(s.checked=!0);const o=c({tagName:"label",classList:["button","tabButton"],textContent:`${e} x ${e}`,attributes:{for:e}});return S(`levelInput${e}`,s),t.append(s,o),t.addEventListener("click",()=>J(e)),t}function He(){const e=c({tagName:"select",classList:["levelField"],attributes:{id:"level-picture"}});return e.addEventListener("change",()=>We(e.value)),k.forEach(({name:t,size:s},o)=>{C.set(t,new Map);const a=c({tagName:"option",textContent:t});C.get(t).set(n.element,a),C.get(t).set(n.size,s),C.get(t).set(n.index,o),e.append(a)}),e}function We(e){const t=C.get(e).get(n.index);d(n.levelName,e),d(n.levelMatrix,k[t].matrix),X()}function J(e){u(n.size)!==e&&(fe[e].checked=!0,d(n.size,e),q(),Y(),X())}function X(){de(),ue(),Z()}function Y(e=!1){const t=u(n.size),s=u(n.levelName);let o;C.forEach((a,l)=>{const r=a.get(n.index),f=a.get(n.size),m=a.get(n.element);if(t!==f){m.classList.add(g.displayNone);return}m.classList.remove(g.displayNone),e&&l===s&&(m.selected=!0);const j=f!==o;o=f,!(e||!j)&&(m.selected=!0,d(n.levelMatrix,k[r].matrix),d(n.levelName,l))})}function Ue(){const e=!u(n.isLightTheme);Q(e)}function Q(e){x([i.changeTheme]).src=e?v.darkTheme:v.lightTheme,document.body.toggleAttribute(g.theme,e),d(n.isLightTheme,e)}const Ve=window.matchMedia("(prefers-color-scheme: dark)");Ve.addEventListener("change",e=>{Q(e.matches)});const Ke={settings:{volume:{callback:ce,path:v.volumeOn,title:"Volume"},changeTheme:{callback:Ue,path:v.lightTheme,title:"Change theme"},score:{callback:Ze,path:v.score,title:"Results of the last games"}},actions:{reset:{callback:Z,path:v.reset,title:"Reset game"},save:{callback:Je,path:v.save,title:"Save game"},continue:{callback:Xe,path:v.continue,title:"Continue game"},solution:{callback:Ye,path:v.solution,title:"Show solution"},random:{callback:Qe,path:v.random,title:"Select a random game"}}},U={[i.continueButton]:null,[i.score]:null,[i.save]:null,[i.reset]:null,[i.solution]:null,[i.volume]:null,[i.changeTheme]:null};function se(e){const t=c({classList:["flex","flex--align-justify-center","flex_gap-30"]});return Object.entries(Ke[e]).forEach(([s,o])=>{const{callback:a,path:l,title:r}=o,f=qe(s,a,l,r,e);s in U&&(U[s]=f),t.append(f)}),t}function qe(e,t,s,o,a){const l=c({tagName:"button",classList:["button"]}),r=c({tagName:"img",classList:["iconButton",`iconButton--${a}`],attributes:{title:o,src:s,alt:e}});return(e===i.volume||e===i.changeTheme)&&S(e,r),l.append(r),l.addEventListener("click",t),l}function Je(){le(),K(n.save,u(n.save)),h(!1,[i.continueButton])}function Xe(){const e=O(n.save),t=!0;ge(e,t),h(!1,[i.reset]),V([n.userMatrix,n.correctCount,n.timer],e),F(e.timer,t);const s=e[n.userMatrix];x(i.gameCells).forEach((o,a)=>{o.forEach((l,r)=>{l.classList.toggle(g.filled,s[a][r]===1),l.classList.toggle(g.crossed,s[a][r]===2)})})}function ge(e,t){$(),Z(),u(n.size)!==e[n.size]&&(V([n.size],e),x(i[`levelInput${e[n.size]}`]).checked=!0,J(e[n.size]),q()),u(n.levelName)!==e[n.levelName]&&(V([n.levelName,n.levelMatrix,n.levelMatrixSum,n.clues],e),Y(!0),t||de(),ue())}function V(e,t){e.forEach(s=>d(s,t[s]))}function Z(){$(),Le(),d(n.correctCount,0),d(n.isEndGame,!1),d(n.isTimer,!1),h(!0,[i.save]),h(!0,[i.reset]),h(!1,[i.solution]);const e=u(n.userMatrix);x(i.gameCells).forEach((t,s)=>{t.forEach((o,a)=>{e[s][a]=0,o.classList.remove(g.crossed,g.filled)})})}function Ye(){const e=u(n.levelMatrix),t=u(n.userMatrix);x(i.gameCells).forEach((s,o)=>{s.forEach((a,l)=>{t[o][l]=0,a.classList.toggle(g.filled,e[o][l]===1),a.classList.remove(g.crossed)})}),d(n.isEndGame,!0),d(n.correctCount,0),$(),h(!0,[i.save]),h(!1,[i.reset])}function Qe(){const e=u(n.levelName),t=k.filter(a=>a.name!==e),s=Math.floor(Math.random()*t.length),o=t[s];J(o.size),ge(o,!1)}function Ze(){Me(),re(B.scoreTable,!1)}function h(e,t){U[t].disabled=e}function je(){const e=c({tagName:"main",classList:["flex","flex--column","flex--align-justify-center","flex_gap-30"]}),t=c({tagName:"header",classList:["flex","flex--align-justify-center","flex--justify-around","width100"]}),s=c({tagName:"h1",textContent:"Nonograms",classList:["header-primary"]});t.append(s,se("settings")),e.append(Fe(Object.values(he)),se("actions"),Ie()),document.body.classList.add("container","flex","flex--column","flex--align-justify-center","flex_gap-30"),document.body.append(t,e,be())}function e1(){je();const e=ee(n.score);e||d([n.score],O([n.score])),h(!0,[i.save]),h(e,[i.score]),h(ee(n.save),[i.continueButton]),Y(),X(),Ne(),O([n.isMuted])&&ce(),Q(window.matchMedia("(prefers-color-scheme: dark)").matches)}e1();
//# sourceMappingURL=main-Pu3usyaY.js.map
